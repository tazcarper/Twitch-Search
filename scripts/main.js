"use strict";function init(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],s=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3],a="https://api.twitch.tv/kraken/search/streams?q=",l=100,c=a+t+"&limit="+l+"&offset="+n;return new Promise(function(a,d){var v=new XMLHttpRequest;v.open("get",c,!0),v.responseType="json",v.onload=function(){var c=v.status;if(200===c)if(console.log("Collecting data..."),r.classList.add("shown"),u.classList.add("hideThis"),m.classList.remove("shown"),0===v.response.streams.length)o=100,i(o),a(s);else{console.log("total ",o),console.log((o/v.response._total).toFixed(2));var h=100*(o/v.response._total).toFixed(2);i(h),s=s.concat(v.response.streams),a(e(t,n+l,s,o+v.response.streams.length))}else d(c)},v.send()})}function t(t){t.preventDefault();var s=document.getElementById("searchField").value;h.innerHTML="",null!=s&&/\S/.test(s)?(document.getElementById("searchField").blur(),e(s,0,[]).then(function(e){function t(e){for(var t=1;t<e.length;)e[t-1]._id===e[t]._id?e.splice(t,1):t++;return e}r.className="";var s=e.sort(function(e,t){return t.viewers-e.viewers});s=t(s),s.length>0?(u.classList.remove("hideThis"),g.classList.remove("shown"),n(s)):g.classList.add("shown")},function(e){console("Something went wrong. Status code:"+e)})):h.innerHTML="Input can not be blank or only white spaces."}function n(e){function t(e,n){var i=0,l="",c=document.getElementById("btn_next"),d=document.getElementById("btn_prev"),r=document.getElementById("streamList"),m=document.getElementById("pageNumber");c.onclick=function(e){e.preventDefault(),o<s(n)&&(o++,t(o,n))},d.onclick=function(e){e.preventDefault(),o>1&&(o--,t(o,n))},1>e&&(e=1),e>s(n)&&(e=s(n)),r.innerHTML="",i=e*a<n.length?e*a:n.length;for(var u=(e-1)*a;i>u;u++){var v=n[u].channel,h=v.display_name,g=v.url,y=v.game,f=v.status,p=n[u].viewers,E=n[u].preview.large,L='<a href="'+g+'" target="_blank"><h3 class="streamName">'+h+"</h3></a>",w='<a href="'+g+'" target="_blank"><img src="'+E+'" alt="" /></a>',b='<span class="viewCount">'+p+" Viewers</span>",I='<h5 class="gameName">'+y+" - "+b+"</h5>",B='<p class="description">'+f+"</p>";l+='<li class="stream"><div class="row"><div class="col-sm-4 col-lg-5">'+w+'</div><div class="col-sm-8 col-lg-7">'+L+I+B+"</div></div></li>"}r.innerHTML=l,m.innerHTML=e+" / "+s(n),1===e?d.style.visibility="hidden":d.style.visibility="visible",e===s(n)?c.style.visibility="hidden":c.style.visibility="visible"}m.classList.add("shown");var n="Total: "+e.length;v.innerHTML=n,t(1,e)}function s(e){return Math.ceil(e.length/a)}function i(e){d.style.width=e+"%"}var o=1,a=5,l=document.getElementById("searchTwitch"),c=document.querySelector("#searchForm"),d=document.getElementById("backColor"),r=document.getElementById("loading"),m=document.getElementById("pagination"),u=document.getElementById("content"),v=document.getElementById("total"),h=document.getElementById("error"),g=document.getElementById("nothingFound");l.addEventListener("touchend",t,!1),l.addEventListener("click",t,!1),c.addEventListener("submit",t,!1)}!function(e,t){function n(n,s){function i(o){t.removeEventListener("DOMContentLoaded",i),n.call(s||e,o)}function o(i){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",o),n.call(s||e,i))}t.addEventListener&&t.addEventListener("DOMContentLoaded",i)||t.attachEvent&&t.attachEvent("onreadystatechange",o)}e.domReady=n}(window,document),domReady(init);