"use strict";function init(){function e(e){e.preventDefault();var n=document.getElementById("searchField").value;v.innerHTML="",null!=n&&/\S/.test(n)?(document.getElementById("searchField").blur(),g(n,0,[]).then(function(e){d.className="";var n=e.sort(function(e,t){return t.viewers-e.viewers});n.length>0?(m.classList.remove("hideThis"),h.classList.remove("shown"),t(n)):h.classList.add("shown")},function(e){console("Something went wrong. Status code:"+e)})):v.innerHTML="Input can not be blank or only white spaces."}function t(e){function t(e,s){var a=0,l="",c=document.getElementById("btn_next"),d=document.getElementById("btn_prev"),r=document.getElementById("streamList"),m=document.getElementById("pageNumber");c.onclick=function(e){e.preventDefault(),i<n(s)&&(i++,t(i,s))},d.onclick=function(e){e.preventDefault(),i>1&&(i--,t(i,s))},1>e&&(e=1),e>n(s)&&(e=n(s)),r.innerHTML="",a=e*o<s.length?e*o:s.length;for(var u=(e-1)*o;a>u;u++){var v=s[u].channel,h=v.display_name,g=v.url,y=v.game,f=v.status,p=s[u].viewers,E=s[u].preview.large,L='<a href="'+g+'" target="_blank"><h3 class="streamName">'+h+"</h3></a>",w='<a href="'+g+'" target="_blank"><img src="'+E+'" alt="" /></a>',b='<span class="viewCount">'+p+" Viewers</span>",I='<h5 class="gameName">'+y+" - "+b+"</h5>",B='<p class="description">'+f+"</p>";l+='<li class="stream"><div class="row"><div class="col-sm-4 col-lg-5">'+w+'</div><div class="col-sm-8 col-lg-7">'+L+I+B+"</div></div></li>"}r.innerHTML=l,m.innerHTML=e+" / "+n(s),1===e?d.style.visibility="hidden":d.style.visibility="visible",e===n(s)?c.style.visibility="hidden":c.style.visibility="visible"}r.classList.add("shown");var s="Total: "+e.length;u.innerHTML=s,t(1,e)}function n(e){return Math.ceil(e.length/o)}function s(e){c.style.width=e+"%"}var i=1,o=5,a=document.getElementById("searchTwitch"),l=document.querySelector("#searchForm"),c=document.getElementById("backColor"),d=document.getElementById("loading"),r=document.getElementById("pagination"),m=document.getElementById("content"),u=document.getElementById("total"),v=document.getElementById("error"),h=document.getElementById("nothingFound"),g=function y(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3],o="https://api.twitch.tv/kraken/search/streams?q=",a=100,l=o+e+"&limit="+a+"&offset="+t;return new Promise(function(o,c){var u=new XMLHttpRequest;u.open("get",l,!0),u.responseType="json",u.onload=function(){var l=u.status;if(200===l)if(console.log("Collecting data..."),d.classList.add("shown"),m.classList.add("hideThis"),r.classList.remove("shown"),0===u.response.streams.length)i=100,s(i),o(n);else{console.log("total ",i),console.log((i/u.response._total).toFixed(2));var v=100*(i/u.response._total).toFixed(2);s(v),n=n.concat(u.response.streams),o(y(e,t+a,n,i+u.response.streams.length))}else c(l)},u.send()})};a.addEventListener("touchend",e,!1),a.addEventListener("click",e,!1),l.addEventListener("submit",e,!1)}!function(e,t){function n(n,s){function i(o){t.removeEventListener("DOMContentLoaded",i),n.call(s||e,o)}function o(i){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",o),n.call(s||e,i))}t.addEventListener&&t.addEventListener("DOMContentLoaded",i)||t.attachEvent&&t.attachEvent("onreadystatechange",o)}e.domReady=n}(window,document),domReady(init);